<!DOCTYPE html>
<html lang="en"><head>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/tabby.min.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/quarto-contrib/reveal-header-1.0.0/add_header.js" defer="true"></script>
<link href="site_libs/quarto-contrib/reveal-header-1.0.0/add_header.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/grid-htext-1.0.0/grid_htext.css" rel="stylesheet">
<script src="site_libs/quarto-contrib/qrcodejs-v1.0.0/qrcode.js"></script><meta charset="utf-8">
  <meta name="generator" content="quarto-1.4.553">

  <meta name="author" content="Neil Shephard">
  <title>Reproducible Research in Practice</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="site_libs/revealjs/dist/theme/quarto.css">
  <link href="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Reproducible Research in Practice</h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Neil Shephard <a href="https://orcid.org/0000-0001-8301-6857" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a>
</div>
<div class="quarto-title-author-email">
<a href="mailto:n.shephard@sheffield.ac.uk">n.shephard@sheffield.ac.uk</a>
</div>
        <p class="quarto-title-affiliation">
            Employers Name
          </p>
    </div>
</div>

</section>
<section id="scan-this" class="slide level2">
<h2>Scan This</h2>
<div id="qr1" class="qrcode"></div>
<script type="text/javascript">
var qrcode = new QRCode("qr1", {"width":"400","text":"<https://ns-rse.github.io/reproducible_research_example>","colorLight":"#ffffff","colorDark":"#000000","height":"400"});
</script>
    
<p><a href="https://ns-rse.github.io/reproducible_research_example" target="_blank">ns-rse.github.io/reproducible_research_example</a></p>
</section>
<section id="who-am-iwhat-do-i-do" class="slide level2">
<h2>Who Am I/What Do I Do?</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>Background in evolutionary and statistical genetics.</li>
<li>Genetic Statistician</li>
<li>Medical Statistician</li>
<li>Data Scientist</li>
<li><span class="emoji" data-emoji="tada">üéâ</span> <a href="https://rse.shef.ac.uk" target="_blank">Research Software Engineer</a> <span class="emoji" data-emoji="tada">üéâ</span></li>
</ul>
</div><div class="column" style="width:50%;">
<ul>
<li>Linux, R, Python, Bash</li>
<li>Literate Programming</li>
<li>Reproducible Research</li>
<li>Open Research</li>
<li>Free Open Source Software</li>
</ul>
</div>
</div>
<aside class="notes">
<p>Before we get into the details I thought it might be useful to explain who am I am and why I‚Äôm here to talk to you today.</p>
<p>I started my academic career studying Zoology and Genetics at Undergraduate then moved onto a Masters in Genetic Epidemiology, both here at the University of Sheffield quite a few years ago. After graduating I spent about eight or nine years as a Genetic Statistician trying to work out what genes are involved in complex diseases at various Universities, Manchester, Western Australia and then returning to Sheffield. I then shifted careers to work as a Medical Statistician for about nine years followed by four years in industry as a Data Scientist where I didn‚Äôt actually do much data science but did learn a lot about software development which is how I‚Äôve ended up back at the University of Sheffield as a Research Software Engineer.</p>
<p>A common theme from my Masters on-wards is that I have used computers to write programmes and analyse data. I‚Äôve taught myself Linux system administration and from a rudimentary training on Fortran, C and Stata have gone on to learn Bash, R and Python as well as a few other bits and pieces of different languages.</p>
<p>Very early on in my career I developed an interest in literate programming and reproducible research which is why Aneta has invited me her today to talk to you and I‚Äôll expand on these topics and show you some work I‚Äôm currently engaged in and how I undertake it in a reproducible manner.</p>
<p>Reproducible Research is one of the foundational aspects of Open Research as by ensuring our work is reproducible and open to review it improves confidence in its accuracy and reliability.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="reproducible-research" class="slide level2">
<h2>Reproducible Research</h2>
<ul>
<li>Reproducibility is fundamental to the scientific method.</li>
<li>Traditionally hand-written notebooks with methods shared in publications.</li>
<li>Modern equivalent is code‚Ä¶
<ul>
<li>Software</li>
<li>Statistical scripts
<ul>
<li>Data cleaning</li>
<li>Analysis, graphs &amp; tables</li>
<li>Numbers and statistics</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="literate-programming---origins" class="slide level2">
<h2>Literate Programming - Origins</h2>
<div class="columns">
<div class="column" style="width:50%;">
<blockquote>
<p>a computer program is given as an explanation of how it works in a natural language, such as English, interspersed (embedded) with snippets of macros and traditional source code, from which compilable source code can be generated.<sup>1</sup></p>
</blockquote>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="https://upload.wikimedia.org/wikipedia/en/6/62/Literate_Programming_book_cover.jpg"></p>
<figcaption><a href="https://en.wikipedia.org/wiki/Literate_programming" target="_blank"><em>Literate Programming</em> - Donald Knuth</a></figcaption>
</figure>
</div>
</div>
</div>
<aside class="notes">
<p>RMarkdown and other languages like it such as the newer <a href="https://quarto.org" target="_blank">Quarto</a> and Emacs‚Äô <a href="https://orgmode.org" target="_blank">Org-mode</a> are literate programming languages which may be an unfamiliar term so I‚Äôve borrowed the definition from Wikipedia.</p>
<p>The idea was originally proposed and developed the computer scientist Donald Knuth, and he literally wrote the book on it.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<aside><ol class="aside-footnotes"><li id="fn1"><p><a href="https://en.wikipedia.org/wiki/Literate_programming" target="_blank">Wikipedia - Literate programming</a></p></li></ol></aside></section>
<section id="literate-programming---better-programmes" class="slide level2">
<h2>Literate Programming - Better Programmes</h2>
<div class="columns">
<div class="column" style="width:50%;">
<blockquote>
<p>My programs are not only explained better than ever before; they also are better programs, because the new methodology encourages me to do a better job.<sup>1</sup></p>
</blockquote>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="https://upload.wikimedia.org/wikipedia/en/6/62/Literate_Programming_book_cover.jpg"></p>
<figcaption><a href="https://en.wikipedia.org/wiki/Literate_programming" target="_blank"><em>Literate Programming</em> - Donald Knuth</a></figcaption>
</figure>
</div>
</div>
</div>
<aside class="notes">
<p>Whilst originating in computer science the principle has seen widespread adoption in research and data science because it encourages reproducible research and facilitates open access to research.</p>
<p>Also, as Knuth found when he adopted the practice it <em>improved</em> the quality of the programmes he wrote, and I‚Äôve found the same is true when writing documents myself since adopting the practice over 20 years ago.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<aside><ol class="aside-footnotes"><li id="fn2"><p><a href="http://www.literateprogramming.com/knuthweb.pdf" target="_blank">Knuth (1984)</a></p></li></ol></aside></section>
<section id="whats-involved" class="slide level2">
<h2>What‚Äôs Involved?</h2>
<ul>
<li>Logical, ordered directory structure.</li>
<li>Scripts/code.</li>
<li>Version control of code.</li>
<li>Reproducible environment (R packages using <a href="https://rstudio.github.io/renv/articles/renv.html" target="_blank">renv</a>).</li>
</ul>
<aside class="notes">
<p>It can seem overwhelming learning a new paradigm or framework for undertaking work and I‚Äôve often found that people want to get on and do the work rather than take a step back and assess how they are going about it but its well worth taking the time out to review and assess your working practices and see how they can be improved.</p>
<p>I‚Äôm going to walk you through a project that I‚Äôve been working on that is looking to improve the prediction of Thyroid Cancer. Its not my own work, its the topic for a PhD for a clinicial Dr Ovie Edafe who is a specialist in neck cancers and related surgery.</p>
<p>There are four broad areas that I‚Äôll cover that hopefully align with the content you have already covered and will be covering in the coming weeks.</p>
<p>The first step is having an organised structure to your directories having data organised in a consistent and structured manner makes it considerably easier to work with.</p>
<p>You then need to write code or scripts, which are still code, that defines the steps you undertake in cleaning and tidying your data and getting it ready for analysis before another series of scripts are used to run the analysis.</p>
<p>All of the code that is written should be version controlled which allos you to track the history of the code and see what changes have been made over time. If a mistake is made it is possible to revert back to a previous state where things did work. Version control and tools such as Git and GitHub make it much easier to collaborate with others on research too.</p>
<p>One final step is having a reproducible environment under which your work is undertaken. This means the specific versions of packages that you have used for analysis should be recorded and used again in the future. In R this can be done via the <a href="" target="_blank"><code>renv</code></a> package. Its not without problems but the situation today is far better than it used to be.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="directory-structure" class="slide level2">
<h2>Directory Structure</h2>
<ul>
<li>Important to keep a copy of the raw data as received.</li>
<li>Data <em>always</em> needs cleaning.</li>
<li>~80% of data analysis is data cleaning/wrangling data!</li>
<li><em>Always</em> keep a record of changes you make to the data.</li>
<li>Separate directories for different data types and script/markdown files.</li>
</ul>
<aside class="notes">
<p>When undertaking research its imperative to keep a copy of the raw data as received. This might be data from sensors that have captured data and if you work with this sort of data then its likely to be fairly well structured, but can also be the results of surveys that have been captured and stored in databases and then exported for you to work with. Depending on how well the data capture was setup you will almost invariably have to clean your data, in my experience about 80% of data analysis is cleaning the data and wrangling it such as deriving variables like age from date of birth, and on that note if you ever do want to analyse age as a variable try and capture date of birth as you can easily derive the age in years or categorise it into bins, but if you only ask people to say what age band they are in you can‚Äôt go back the other way. Common errors in data cleaning are having string characters in variables that are meant to be numeric, or having categorical variables where people haven‚Äôt entered the correct field and so you have to then work out how to tidy this which I‚Äôll come on to.</p>
<p>The key thin is that its important to keep a record of the changes you make and these will be in R scripts or Markdown/Quarto files. And it therefore makes sense to separate your data from your scripts.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="directory-structure---thyroid-cancer-prediction" class="slide level2">
<h2>Directory Structure - Thyroid Cancer Prediction</h2>
<div class="columns">
<div class="column" style="width:60%;">
<pre><code>‚ù± tree -d -L 2
[4.0K Mar 19 12:36]  .
‚îú‚îÄ‚îÄ [4.0K Nov 22 14:57]  ./data
‚îÇ&nbsp;&nbsp; ‚îú‚îÄ‚îÄ [4.0K Jan  9 13:32]  ./data/csv
‚îÇ&nbsp;&nbsp; ‚îî‚îÄ‚îÄ [4.0K Feb 29 17:27]  ./data/r
‚îú‚îÄ‚îÄ [4.0K Mar 14 17:36]  ./docs
‚îÇ&nbsp;&nbsp; ‚îú‚îÄ‚îÄ [   7 Jan  5 14:45]  ./docs/data -&gt; ../data
‚îÇ&nbsp;&nbsp; ‚îú‚îÄ‚îÄ [4.0K Feb 29 15:38]  ./docs/modelling_cache
‚îÇ&nbsp;&nbsp; ‚îú‚îÄ‚îÄ [4.0K Mar 14 17:21]  ./docs/modelling_files
‚îÇ&nbsp;&nbsp; ‚îú‚îÄ‚îÄ [   4 Jan  5 14:44]  ./docs/r -&gt; ../r
‚îÇ&nbsp;&nbsp; ‚îî‚îÄ‚îÄ [4.0K Mar 14 17:21]  ./docs/_site
‚îú‚îÄ‚îÄ [4.0K Oct 19 11:40]  ./inst
‚îú‚îÄ‚îÄ [4.0K Nov 16 10:54]  ./log
‚îú‚îÄ‚îÄ [4.0K Oct 19 11:24]  ./node_modules
‚îú‚îÄ‚îÄ [4.0K Oct 19 12:39]  ./pages
‚îú‚îÄ‚îÄ [4.0K Oct 12 10:43]  ./papers
‚îú‚îÄ‚îÄ [4.0K Nov  9 11:44]  ./quarto
‚îÇ&nbsp;&nbsp; ‚îî‚îÄ‚îÄ [4.0K Oct 19 13:12]  ./quarto/_site
‚îú‚îÄ‚îÄ [4.0K Mar 14 16:59]  ./r
‚îú‚îÄ‚îÄ [4.0K Mar 14 17:28]  ./renv
‚îÇ&nbsp;&nbsp; ‚îú‚îÄ‚îÄ [4.0K Nov 16 10:57]  ./renv/library
‚îÇ&nbsp;&nbsp; ‚îî‚îÄ‚îÄ [4.0K Feb 29 14:28]  ./renv/staging
‚îú‚îÄ‚îÄ [4.0K Jan 31 11:00]  ./_site
‚îÇ&nbsp;&nbsp; ‚îú‚îÄ‚îÄ [4.0K Dec 19 16:36]  ./_site/data_files
‚îÇ&nbsp;&nbsp; ‚îú‚îÄ‚îÄ [4.0K Feb 15 15:15]  ./_site/docs
‚îÇ&nbsp;&nbsp; ‚îú‚îÄ‚îÄ [4.0K Dec 19 16:36]  ./_site/modelling_files
‚îÇ&nbsp;&nbsp; ‚îî‚îÄ‚îÄ [4.0K Jan 25 17:22]  ./_site/site_libs
‚îî‚îÄ‚îÄ [4.0K Feb  1 17:47]  ./tmp

29 directories</code></pre>
</div><div class="column" style="width:40%;">
<p>Key top-level directories</p>
<ul>
<li><code>data/</code> - holds data.</li>
<li><code>docs/</code> - <em>my</em> Quarto files.</li>
<li><code>r/</code> - <em>my</em> R-scripts.</li>
</ul>
</div>
</div>
<aside class="notes">
<p>Here is an example of the directory structure of one of the repositories I have setup for this work.</p>
<p>The output only shows the nesting two directory levels deep, but you can see that at the top level I have a number of directories, not all of them are relevant, but the key ones are listed on the right, there is the <code>data/</code> directory which will hold all of the data, there are two sub-directories <code>csv</code> for raw CSV files and <code>r</code> which holds cleaned data in R‚Äôs byte format which speeds up loading and preserves all the labelling and categorical variables.</p>
<p>The <code>docs/</code> directory contains my <a href="https://quarto.org" target="_blank">Quarto</a> source files that I write, both <a href="https://quarto.org" target="_blank">Quarto</a> and <a href="https://bookdown.org/yihui/rmarkdown/" target="_blank">RMarkdown</a> will make a bunch of other directories when they are rendering your pages which are some of those listed such as <code>_site</code> but you don‚Äôt need to worry about those.</p>
<p>The final key directory that I have is <code>r/</code> which holds the R scripts that I write.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="directory-structure---data" class="slide level2">
<h2>Directory Structure - <code>data/</code></h2>
<!-- :::: {.columns} -->
<!-- ::: {.column width="60%"} -->
<pre><code>‚ù± tree data
[4.0K Nov 22 14:57]  data
‚îú‚îÄ‚îÄ [4.0K Jan  9 13:32]  data/csv
‚îÇ&nbsp;&nbsp; ‚îú‚îÄ‚îÄ [ 20K Jan  9 13:31]  data/csv/sheffield_thyroid_nodule.csv
‚îÇ&nbsp;&nbsp; ‚îî‚îÄ‚îÄ [393K Nov  2 11:08]  data/csv/Thy3000_DATA_LABELS_Raw.csv
‚îî‚îÄ‚îÄ [4.0K Feb 29 17:27]  data/r
    ‚îú‚îÄ‚îÄ [ 30K Mar 14 11:12]  data/r/clean.rds
    ‚îú‚îÄ‚îÄ [136K Feb 29 17:56]  data/r/elastic_net.RData
    ‚îú‚îÄ‚îÄ [136K Feb 29 17:56]  data/r/lasso.RData
    ‚îú‚îÄ‚îÄ [129K Feb 29 17:56]  data/r/rf.RData
    ‚îú‚îÄ‚îÄ [137K Feb 29 17:58]  data/r/svm.RData
    ‚îî‚îÄ‚îÄ [ 14K Feb 29 17:56]  data/r/xgboost.RData

3 directories, 9 files</code></pre>
<!-- ::: -->
<!-- ::: {.column width="40%"} -->
<!-- Files -->
<ul>
<li><code>data/csv/*.csv</code> - CSV files</li>
<li><code>data/r/*.rds</code> - R files</li>
<li><code>data/r/*.RData</code> - R files</li>
</ul>
<!-- ::: -->
<!-- :::: -->
<aside class="notes">
<p>The <code>data/csv</code> directory holds the raw data and there are two files the raw data <code>sheffield_thyroid_nodule.csv</code> and the data dictionary <code>Thy3000_DATA_LABELS_Raw.csv</code>.</p>
<p>The <code>data/r</code> directory holds the cleaned data in <code>clean.rds</code> and the results of fitting various different types of models to the data in the <code>.RData</code> files.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="directory-structure---docs" class="slide level2">
<h2>Directory Structure - <code>docs/</code></h2>
<pre><code>‚ù± l docs | grep -v "~"
drwxr-xr-x neil neil 4.0 KB Thu Mar 14 17:36:04 2024 .
drwxr-xr-x neil neil 4.0 KB Thu Mar 28 16:35:45 2024 ..
.rw-r--r-- neil neil  10 B  Thu Feb 15 15:16:48 2024 .gitignore
.rw-r--r-- neil neil  12 KB Thu Jan 25 15:35:49 2024 .modelling.qmd
drwxr-xr-x neil neil 4.0 KB Thu Mar 14 17:15:43 2024 .quarto
.rw-r--r-- neil neil 483 B  Thu Mar 14 16:59:28 2024 _quarto.yml
drwxr-xr-x neil neil 4.0 KB Thu Mar 14 17:21:20 2024 _site
.rw-r--r-- neil neil 408 B  Thu Mar 14 16:57:10 2024 about.qmd
.rw-r--r-- neil neil 1.2 KB Thu Mar 14 16:57:10 2024 citations.qmd
lrwxrwxrwx neil neil   7 B  Fri Jan  5 14:45:10 2024 data ‚áí ../data
.rw-r--r-- neil neil  33 KB Thu Mar 14 16:57:10 2024 data.qmd
.rw-r--r-- neil neil 363 B  Thu Mar 14 16:57:10 2024 index.qmd
.rw-r--r-- neil neil 569 B  Thu Mar 14 16:57:10 2024 links.qmd
.rw-r--r-- neil neil 2.0 KB Thu Mar 14 16:57:10 2024 literature.qmd
.rw-r--r-- neil neil  32 KB Thu Mar 14 17:36:04 2024 modelling.qmd
drwxr-xr-x neil neil 4.0 KB Thu Feb 29 15:38:53 2024 modelling_cache
.rw-r--r-- neil neil 3.5 KB Thu Mar 14 17:31:46 2024 modelling_elastic_net.qmd
drwxr-xr-x neil neil 4.0 KB Thu Mar 14 17:21:18 2024 modelling_files
.rw-r--r-- neil neil 5.4 KB Thu Mar 14 17:31:46 2024 modelling_lasso.qmd
.rw-r--r-- neil neil 3.6 KB Thu Mar 14 17:31:46 2024 modelling_random_forest.qmd
.rw-r--r-- neil neil 7.0 KB Thu Mar 14 17:31:46 2024 modelling_tidymodel.qmd
lrwxrwxrwx neil neil   4 B  Fri Jan  5 14:44:09 2024 r ‚áí ../r
.rw-r--r-- neil neil  18 KB Thu Mar 14 16:57:10 2024 references.bib
.rw-r--r-- neil neil 2.7 KB Thu Mar 14 16:57:10 2024 reproducibility.qmd
.rw-r--r-- neil neil  17 B  Thu Mar 14 16:59:28 2024 styles.css</code></pre>
<aside class="notes">
<p>The <code>docs/</code> directory holds my <a href="https://quarto.org" target="_blank">Quarto</a> files which all end in <code>.qmd</code>. I don‚Äôt like having large files to navigate so split my code and papers into a number of smaller files that do specific things and include these from the master document which is <code>index.qmd</code>. There is a <code>references.bib</code> file which contains citations so we can include citations easily. The <code>_quarto.yml</code> files is a key file which defines how the Quarto project is setup and rendered but I won‚Äôt cover that in detail here.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="directory-structure---r" class="slide level2">
<h2>Directory Structure - <code>r/</code></h2>
<pre><code>‚ù± l r | grep -v "~"
drwxr-xr-x neil neil 4.0 KB Thu Mar 14 16:59:28 2024 .
drwxr-xr-x neil neil 4.0 KB Thu Mar 28 16:35:45 2024 ..
.rw-r--r-- neil neil  28 KB Thu Mar 14 16:56:18 2024 clean.R
.rw-r--r-- neil neil 684 B  Thu Mar 14 16:59:28 2024 master.R
.rw-r--r-- neil neil  15 KB Thu Feb 29 14:40:13 2024 modelling.R
.rw-r--r-- neil neil 2.6 KB Thu Mar 14 16:59:28 2024 simulate_data.R
.rw-r--r-- neil neil 233 B  Thu Jan 25 17:02:10 2024 summary.R
.rw-r--r-- neil neil 2.9 KB Thu Mar 14 16:57:10 2024 tidymodel.R</code></pre>
<aside class="notes">
<p>The <code>r/</code> directory holds my R scripts, the key one is <code>master.R</code> which holds the main commands that setup the R environment, load libraries and set relative directories. The <code>clean.R</code> file does what it says on the tin, it cleans the raw data and saves it in R format. There are then scripts for modelling and simulating data.</p>
<p>Now that we‚Äôve covered how I organise my data we can start looking at some code, but before I move on are there any questions about this aspect?</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="scriptscode---master.r" class="slide level2">
<h2>Scripts/Code - <code>master.R</code></h2>
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a></a><span class="do">## Filename    : master.R</span></span>
<span id="cb5-2"><a></a><span class="do">## Description : Master file that controls running of all subsequent scripts.</span></span>
<span id="cb5-3"><a></a><span class="fu">library</span>(dplyr)</span>
<span id="cb5-4"><a></a><span class="fu">library</span>(forcats)</span>
<span id="cb5-5"><a></a><span class="fu">library</span>(Hmisc)</span>
<span id="cb5-6"><a></a><span class="fu">library</span>(lubridate)</span>
<span id="cb5-7"><a></a><span class="fu">library</span>(tidymodels)</span>
<span id="cb5-8"><a></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb5-9"><a></a><span class="fu">library</span>(vip)</span>
<span id="cb5-10"><a></a></span>
<span id="cb5-11"><a></a><span class="do">## Set directories based on current location</span></span>
<span id="cb5-12"><a></a>base_dir <span class="ot">&lt;-</span> <span class="fu">getwd</span>()</span>
<span id="cb5-13"><a></a>data_dir <span class="ot">&lt;-</span> <span class="fu">paste</span>(base_dir, <span class="st">"data"</span>, <span class="at">sep =</span> <span class="st">"/"</span>)</span>
<span id="cb5-14"><a></a>csv_dir <span class="ot">&lt;-</span> <span class="fu">paste</span>(data_dir, <span class="st">"csv"</span>, <span class="at">sep =</span> <span class="st">"/"</span>)</span>
<span id="cb5-15"><a></a>r_dir <span class="ot">&lt;-</span> <span class="fu">paste</span>(data_dir, <span class="st">"r"</span>, <span class="at">sep =</span> <span class="st">"/"</span>)</span>
<span id="cb5-16"><a></a>r_scripts <span class="ot">&lt;-</span> <span class="fu">paste</span>(base_dir, <span class="st">"r"</span>, <span class="at">sep =</span> <span class="st">"/"</span>)</span>
<span id="cb5-17"><a></a></span>
<span id="cb5-18"><a></a><span class="do">## Clean the data</span></span>
<span id="cb5-19"><a></a><span class="fu">source</span>(<span class="fu">paste</span>(r_scripts, <span class="st">"clean.R"</span>, <span class="at">sep =</span> <span class="st">"/"</span>))</span>
<span id="cb5-20"><a></a></span>
<span id="cb5-21"><a></a></span>
<span id="cb5-22"><a></a><span class="do">## Simulate data</span></span>
<span id="cb5-23"><a></a><span class="fu">source</span>(<span class="fu">paste</span>(r_scripts, <span class="st">"simulate_data.R"</span>, <span class="at">sep =</span> <span class="st">"/"</span>))</span>
<span id="cb5-24"><a></a></span>
<span id="cb5-25"><a></a><span class="do">## Run Statistical models</span></span>
<span id="cb5-26"><a></a><span class="fu">source</span>(<span class="fu">paste</span>(r_scripts, <span class="st">"tidymodel.R"</span>, <span class="at">sep =</span> <span class="st">"/"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<aside class="notes">
<p>The <code>master.R</code> script doesn‚Äôt do a great deal, it loads libraries and then as the comments show, and its important to get into the habit of putting comments in scripts to help other people, including your future self, it then sets the working directory. It does this in a reproducible manner by first asking the operating system what the current directory is using the <code>getwd()</code> command and then appends various directory paths, such as <code>data</code> and saving it in the <code>data_dir</code> variable, this in turn has <code>csv</code> appended to it and saved in the <code>csv_dir</code> which points to the nested directory where our data files live.</p>
<p>You should get in the habit of using relative directories so that the code runs on different computers/systems, if you had hard coded the path based on where you store the files on your computer the script won‚Äôt run on any other computer until someone changes that value, relative paths get around that limitation.</p>
<p>After setting directories a number of scripts are called using the <code>source()</code> command and within it I just paste the name of the script onto the <code>r_scripts</code> variable which holds the path to the <code>r/</code> directory. The <code>clean.R</code> script is first called, followed by the <code>simulate_data.R</code> and then the <code>tidymodels.R</code>.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="scriptscode---rclean.r" class="slide level2">
<h2>Scripts/code - <code>r/clean.R</code></h2>
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a></a><span class="do">## Filename : clean.R</span></span>
<span id="cb6-2"><a></a><span class="do">## Description : Load and clean raw data, saving as a .RData file for subsequent analyses.</span></span>
<span id="cb6-3"><a></a></span>
<span id="cb6-4"><a></a><span class="do">## Read the data and convert to tibble</span></span>
<span id="cb6-5"><a></a>df_raw <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">paste</span>(csv_dir, <span class="st">"Thy3000_DATA_LABELS_Raw.csv"</span>, <span class="at">sep =</span> <span class="st">"/"</span>))</span>
<span id="cb6-6"><a></a>df_raw <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(df_raw)</span>
<span id="cb6-7"><a></a><span class="do">## Rename columns using dplyr::rename()</span></span>
<span id="cb6-8"><a></a>df_raw <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">rename</span>(df_raw,</span>
<span id="cb6-9"><a></a>  <span class="at">record_id =</span> <span class="st">"Record ID"</span>,</span>
<span id="cb6-10"><a></a>  <span class="at">data_access_group =</span> <span class="st">"Data Access Group"</span>,</span>
<span id="cb6-11"><a></a>  <span class="at">study_id =</span> <span class="st">"Study ID"</span>,</span>
<span id="cb6-12"><a></a>  <span class="at">date_referral =</span> <span class="st">"1.1 Date of referral"</span>,</span>
<span id="cb6-13"><a></a>  <span class="at">clinic_recruiting =</span> <span class="st">"1.2 Which clinic was the patient recruited from?"</span>,</span>
<span id="cb6-14"><a></a>  <span class="at">clinic_recruiting_other =</span> <span class="st">"If Other"</span>,</span>
<span id="cb6-15"><a></a>  <span class="at">date_clinic =</span> <span class="st">"1.3. The date the patient was seen in clinic"</span>,</span>
<span id="cb6-16"><a></a>  <span class="at">referral_source =</span> <span class="st">"1.4 Referral source"</span>,</span>
<span id="cb6-17"><a></a>  <span class="at">referral_source_other =</span> <span class="st">"If Other, please specify"</span>,</span>
<span id="cb6-18"><a></a>  <span class="at">two_week_wait_referral =</span> <span class="st">"1.4.1 If GP, was it 2-week wait referral?"</span>,</span>
<span id="cb6-19"><a></a>  <span class="at">presentation =</span> <span class="st">"1.5. Presentation"</span>,</span>
<span id="cb6-20"><a></a>  <span class="at">presentation_complete =</span> <span class="st">"Complete?...12"</span>,</span>
<span id="cb6-21"><a></a>  <span class="at">age =</span> <span class="st">"2.1. Age of the patient when seen in clinic"</span>,</span>
<span id="cb6-22"><a></a>  <span class="at">bmi =</span> <span class="st">"2.2. Body Mass Index of patient"</span>,</span>
<span id="cb6-23"><a></a>  <span class="at">smoking_status =</span> <span class="st">"2.3. Smoking status"</span>,</span>
<span id="cb6-24"><a></a>  ...</span>
<span id="cb6-25"><a></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<aside class="notes">
<p>Its important to script the work you do on the code, it provides evidence of the changes that have been made to clean the code up and allows the work to be fully reproducible. Such an audit trail is useful as it allows mistakes to be corrected. This and other R and Quarto Markdown files are version controlled using Git which I‚Äôll come onto shortly.</p>
<p>This script, <code>r/clean.R</code> does the hard work of cleaning/tidying the data.</p>
<p>It loads the data in and then renames a bunch of variables because spaces in names are a pain and all the numerical prefixes are pointless.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="scriptscode---rclean.r-cont." class="slide level2">
<h2>Scripts/code - <code>r/clean.R</code> (<em>cont.</em>)</h2>
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a></a></span>
<span id="cb7-2"><a></a><span class="do">## Convert dates to elapsed dates using lubridate</span></span>
<span id="cb7-3"><a></a>df <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span></span>
<span id="cb7-4"><a></a>  <span class="fu">mutate</span>(</span>
<span id="cb7-5"><a></a>    <span class="at">date_referral =</span> lubridate<span class="sc">::</span><span class="fu">dmy</span>(date_referral),</span>
<span id="cb7-6"><a></a>    <span class="at">date_clinic =</span> lubridate<span class="sc">::</span><span class="fu">dmy</span>(date_clinic),</span>
<span id="cb7-7"><a></a>    <span class="at">date_initial_management_decision =</span> lubridate<span class="sc">::</span><span class="fu">dmy</span>(date_initial_management_decision),</span>
<span id="cb7-8"><a></a>    <span class="at">date_treatment =</span> lubridate<span class="sc">::</span><span class="fu">dmy</span>(date_treatment),</span>
<span id="cb7-9"><a></a>    <span class="at">routine_review_date_last_seen =</span> lubridate<span class="sc">::</span><span class="fu">dmy</span>(routine_review_date_last_seen)</span>
<span id="cb7-10"><a></a>  )</span>
<span id="cb7-11"><a></a></span>
<span id="cb7-12"><a></a><span class="do">## Convert variables that are meant to be numeric but aren't</span></span>
<span id="cb7-13"><a></a>df <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span></span>
<span id="cb7-14"><a></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb7-15"><a></a>    <span class="at">bmi =</span> <span class="fu">as.numeric</span>(bmi),</span>
<span id="cb7-16"><a></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><a href="https://www.tidyverse.org/" target="_blank">Tidyverse</a>
<ul>
<li><a href="https://dplyr.tidyverse.org/" target="_blank"><code>{dplyr}</code></a></li>
<li><a href="https://lubridate.tidyverse.org/" target="_blank"><code>{lubridate}</code></a></li>
<li><a href="https://r4ds.hadley.nz/" target="_blank">R for DataScience (2e)</a></li>
</ul></li>
</ul>
<aside class="notes">
<p>Another important step to working with data is to ensure the dates are correct and recognised by the software, the strings people typically enter these as are not something that computers can do calculations on, instead software uses elapsed times and takes as <a href="https://www.epochconverter.com/" target="_blank">epoch time</a> which is the number seconds that have elapsed from midnight on 1970-01-01 and so internally these are stored as numeric values but they can be represented as human readable dates. But the advantage of having them stored as epoch time is that you can then perform calculations on them and work out periods of time.</p>
<p>Often unless data capture has been done very carefully there will be errors in numerical variables such as including characters which means the whole column for something that is meant to be numeric such as Body Mass Index (<code>bmi</code>) are not the correct type, they‚Äôre strings rather than actual numbers. We can use the <code>as.numeric()</code> function here with the Tidyverse package <code>dplyr::mutate()</code> to replace these.</p>
<p>Its worth mentioning the Tidyverse which is an ‚Äú<em>opinionated collection of R packages for data science</em>‚Äù that make working with data in R considerably easier than the base functions. I would highly recommend the book.</p>
<p>Perhaps the biggest and best feature of the Tidyverse is the pipe, here I‚Äôm using the base pipe <code>|&gt;</code> which allows commands to be written in a Western-style of grammar, reading from left to right and top down rather than in base R where you would nest functions within each other.</p>
<p>This vastly improves the readability of the code.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="scriptscode---rclean.r-cont.-1" class="slide level2">
<h2>Scripts/code - <code>r/clean.R</code> (<em>cont.</em>)</h2>
<div class="sourceCode" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a></a></span>
<span id="cb8-2"><a></a>check_cols <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb8-3"><a></a>  <span class="st">"previous_neck_irradiation"</span>,</span>
<span id="cb8-4"><a></a>  <span class="st">"incidental_imaging"</span>,</span>
<span id="cb8-5"><a></a>  <span class="st">"retrosternal"</span>,</span>
<span id="cb8-6"><a></a>  <span class="st">"palpable_lymphadenopathy"</span>,</span>
<span id="cb8-7"><a></a>  <span class="st">"nodule_rapid_growth"</span>,</span>
<span id="cb8-8"><a></a>  <span class="st">"thyroid_function_3months"</span>,</span>
<span id="cb8-9"><a></a>  <span class="st">"ultrasound"</span>,</span>
<span id="cb8-10"><a></a>  <span class="st">"elastography"</span>,</span>
<span id="cb8-11"><a></a>  <span class="st">"ct_neck"</span>,</span>
<span id="cb8-12"><a></a>  <span class="st">"mri_neck"</span>,</span>
<span id="cb8-13"><a></a>  <span class="st">"iodine_scan"</span>,</span>
<span id="cb8-14"><a></a>  <span class="st">"nodule_fna"</span>,</span>
<span id="cb8-15"><a></a>  <span class="st">"core_biopsy"</span>,</span>
<span id="cb8-16"><a></a>  <span class="st">"routine_review_ultrasound"</span>,</span>
<span id="cb8-17"><a></a>  <span class="st">"routine_review_fna"</span>,</span>
<span id="cb8-18"><a></a>  <span class="st">"routine_review_patient_signposting_information"</span></span>
<span id="cb8-19"><a></a>)</span>
<span id="cb8-20"><a></a>df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb8-21"><a></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="fu">across</span>(</span>
<span id="cb8-22"><a></a>    <span class="fu">all_of</span>(check_cols),</span>
<span id="cb8-23"><a></a>    <span class="sc">~</span> dplyr<span class="sc">::</span><span class="fu">recode</span>(.x,</span>
<span id="cb8-24"><a></a>      <span class="st">"Yes"</span> <span class="ot">=</span> <span class="dv">1</span>,</span>
<span id="cb8-25"><a></a>      <span class="st">"No"</span> <span class="ot">=</span> <span class="dv">0</span>,</span>
<span id="cb8-26"><a></a>      <span class="st">"Not Known"</span> <span class="ot">=</span> <span class="cn">NA_real_</span></span>
<span id="cb8-27"><a></a>    )</span>
<span id="cb8-28"><a></a>  ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><a href="https://github.com/ns-rse/thyroid-cancer-prediction/blob/main/r/clean.R" target="_blank">thyroid-cancer-prediction/r/clean.R</a></li>
</ul>
<aside class="notes">
<p>Another common task in cleaning data is to convert string variables such as <code>Yes</code> / <code>No</code> / <code>Not Known</code> to numerical binary variables. Typically there will be lots of columns on which you want to do this and rather than write the same code out lots there are a lot of neat ways of repeating commands across a range of variables.</p>
<p>Here we save all the variables we want to convert in the <code>check_cols</code> variable and then within the <code>dplyr::mutate()</code> function we apply the same function <code>dplyr::recode()</code> <code>across()</code> <code>all_of()</code> this list, replacing <code>Yes</code> with <code>1</code>, <code>No</code> with <code>0</code> and <code>Not Known</code> with R‚Äôs internal <code>NA</code> value.</p>
<p>Currently it has 704 lines so I can‚Äôt tal you through all of it but because this is all open if you want to look at the code you can do and I‚Äôve included the link on this slide.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="scriptscode---rclean.r-cont.-2" class="slide level2">
<h2>Scripts/code - <code>r/clean.R</code> (<em>cont.</em>)</h2>
<div class="sourceCode" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a></a><span class="do">## Finally save the data</span></span>
<span id="cb9-2"><a></a><span class="fu">saveRDS</span>(df, <span class="at">file =</span> <span class="fu">paste</span>(r_dir, <span class="st">"clean.rds"</span>, <span class="at">sep =</span> <span class="st">"/"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><a href="https://github.com/ns-rse/thyroid-cancer-prediction/blob/main/r/clean.R" target="_blank">thyroid-cancer-prediction/r/clean.R</a></li>
</ul>
<aside class="notes">
<p>Finally though we save the <code>df</code> data frame in the <code>r_dir</code> directory that was defined in the <code>master.R</code> script.</p>
<p>I can re-run this at any time if for example there was an error in my code, or more patients have been collected and the dataset needs analysing again or conversely if someone withdraws from the study I could add lines to <code>r/clean.R</code> to remove them from the dataset that is being analysed.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="version-control" class="slide level2">
<h2>Version Control</h2>
<ul>
<li>Keep fine-grained records of changes to code.</li>
<li>Regular saves of work.</li>
<li>Backup and collaboration via <a href="https://github.com" target="_blank">GitHub</a> / <a href="https://gitlab.com" target="_blank">GitLab</a></li>
<li>Organised and consistent system, avoids‚Ä¶</li>
</ul>
<aside class="notes">
<p>I‚Äôve mentioned that the files for this work are version controlled, hands up anyone who has heared of Version Control?</p>
<p>Keep your hands up if you‚Äôve used version control?</p>
<p>Ok, thank you.</p>
<p>Version control has been around for a long time, you may be familiar with editions of books as one example or with Wikipedia where the changes and edits that people make are tracked</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="version-control-1" class="slide level2">
<h2>Version Control</h2>
<p><img data-src="https://www.phdcomics.com/comics/archive/phd101212s.gif"></p>
</section>
<section id="version-control-2" class="slide level2">
<h2>Version Control</h2>
<p>Two repositories on <a href="https://github.com" target="_blank">GitHub</a></p>
<ul>
<li><a href="https://github.com/ns-rse/thyroid-cancer-prediction" target="_blank">ns-rse/thyroid-cancer-prediction</a> - repository I started to show colleague how to use Git and R.</li>
<li><a href="https://github.com/mdp21oe/multicentre_thyroid" target="_blank">mdp21oe/multicenter-thyroid</a> - repository by Ovie to re-write his paper in Quarto Markdown.</li>
</ul>
<!--
## Formatting

Quarto slides are written in [Markdown](https://quarto.org/docs/authoring/markdown-basics.html).

| Markdown Syntax                              | Output                                |
|:---------------------------------------------|:--------------------------------------|
| `*italics*`, `**bold**`, `***bolditalics***` | *italics*, **bold**, **bold italics** |
| `superscript^1^`, `subscript~2~`             | superscript^1^, subscript~2~          |
| `~~strikethrough~~`                          | ~~strikethrough~~                     |
| ```code```                                   | `code`                                |
| `[Quarto](https://quarto.org)`               | [Quarto](https://quarto.org)          |

::: {.notes}
Speaker Notes can be added to each slide. **Formatting** can be used here too.
:::


## Embed Images

[Figures](https://quarto.org/docs/authoring/figures.html) can be embeded using a URL and resized.

```markdown
![Relaxing in the Julian Alps](https://live.staticflickr.com/65535/53144704609_c5e6fa8c77_k.jpg){width=700}
```

![Relaxing in the Julian Alps](https://live.staticflickr.com/65535/53144704609_c5e6fa8c77_k.jpg){width=700}

::: {.notes}
:::

## Embed Images (*cont.*)

You can also include images locally.^[Make sure to `git add` them otherwise they won't publish] and make them hyperlinks.

```markdown
![[OSC Sheffield](https://osc-international.com/osc-sheffield)](img/OSC_Sheffield.png){width=300}
```

![[OSC Sheffield](https://osc-international.com/osc-sheffield)](img/OSC_Sheffield.png){width=300}

::: {.notes}
:::

-->
</section>
<section id="quarto-data-science-learning-community" class="slide level2">
<h2>Quarto &amp; Data Science Learning Community</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p>The official documentation is <em>really</em> good.</p>
<ul>
<li><a href="https://quarto.org/docs/get-started/" target="_blank">Get Started</a></li>
<li><a href="https://quarto.org/docs/authoring/markdown-basics.html" target="_blank">Markdown Basics</a></li>
<li><a href="https://quarto.org/docs/guide/" target="_blank">Guide</a> with many sections on <a href="https://quarto.org/docs/presentations/" target="_blank">Presentations</a> <a href="https://quarto.org/docs/websites/" target="_blank">Website</a>, <a href="https://quarto.org/docs/books/" target="_blank">Books</a> and more.</li>
</ul>
</div><div class="column" style="width:50%;">
<div id="qr3" class="qrcode"></div>
<script type="text/javascript">
var qrcode = new QRCode("qr3", {"width":"400","text":"<https://dslc.io/>","colorLight":"#ffffff","colorDark":"#000000","height":"400"});
</script>
    
<p><a href="https://dslc.io/" target="_blank">Data Science Learning Community (dslc.io)</a></p>
</div>
</div>
<aside class="notes">
<p>I think most of the course material you‚Äôre learning is focused on RMarkdown but everything you learn can be applied to Quarto which is really the next iteration or generation of RMarkdown. If you‚Äôre keen to give it a try then the documentation is really good.</p>
<p>Perhaps also of interest when you have questions about things which aren‚Äôt working as you‚Äôd expect or how to do something is the execellent <a href="https://dslc.io/" target="_blank">Data Science Learning Community (dslc.io)</a> (need R4DS community) which is a great place to join book clubs to work through things like <a href="https://r4ds.hadley.nz/" target="_blank">R for Data Science (2e)</a> and over 50 books clubs or ask questions in their Slack channel.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<!-- ## Extensions -->
<!-- :::: {.columns} -->
<!-- ::: {.column width="70%"} -->
<!-- [Extensions](https://quarto.org/docs/extensions/) for themes and other functionality -->
<!-- (press `c` whilst viewing these slides :wink: ). -->
<!-- + [Shortcode/Filter](https://quarto.org/docs/extensions/listing-filters.html) -->
<!-- + [Journal Articles](https://quarto.org/docs/extensions/listing-journals.html) -->
<!-- + [Custom Formats](https://quarto.org/docs/extensions/listing-formats.html) -->
<!-- + [**RevealJS**](https://quarto.org/docs/extensions/listing-revealjs.html) -->
<!-- + [awesome-quarto](https://github.com/mcanouil/awesome-quarto) - Quarto tools & examples -->
<!-- ::: -->
<!-- ::: {.column width=30%} -->
<!-- This Template... -->
<!--  -->
<!-- ::: -->
<!-- :::: -->
</section>
<section id="sheffieldr-user-group" class="slide level2">
<h2>SheffieldR User Group</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><a href="https://sheffieldr.github.io" target="_blank"><img data-src="https://sheffieldr.github.io/schedule_slides/img/SheffieldR_hex.png" alt="sheffieldr.github.io"></a></p>
<figcaption>sheffieldr.github.io</figcaption>
</figure>
</div>
</div><div class="column" style="width:50%;">
<div id="qr2" class="qrcode"></div>
<script type="text/javascript">
var qrcode = new QRCode("qr2", {"width":"400","text":"<https://sheffieldr.github.io/>","colorLight":"#ffffff","colorDark":"#000000","height":"400"});
</script>
    
<p><a href="https://sheffieldr.github.io" target="_blank">sheffieldr.github.io</a></p>
</div>
</div>
<aside class="notes">
<p>If you‚Äôre interested in learning more about the many wonderful things you can do with R then you might be interested in the SheffieldR User Group that meets roughly every month with presentations and talks on different packages and how to do different things with R.</p>
<p>Its meant to be diverse, friendly and welcoming to users of all abilities.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>

<div class="quarto-auto-generated-content">
<div class="footer footer-default">
<p><strong>Slides</strong> : <a href="https://ns-rse.github.io/reproducible_research_example" target="_blank"><strong>ns-rse.github.io/reproducible_research_example</strong></a></p>
</div>
</div>
<div class="reveal-header">
<div class="header-logo">
<img data-src="">
</div>
<div class="sc-title">
<p> </p>
</div>
<div class="header-text">
<p>Reproducible Research in Practice</p>
</div>
<div class="sb-title">
<p> </p>
</div>
</div>
</section>

    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-confetti/confetti.js"></script>
  <script src="site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="site_libs/revealjs/plugin/search/search.js"></script>
  <script src="site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'confetti': {"particleCount":50,"angle":90,"spread":45,"startVelocity":45,"decay":0.9,"gravity":1,"drift":0,"ticks":200,"colors":null,"shapes":null,"scalar":1,"zIndex":100,"disableForReducedMotion":false},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'speaker',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, RevealConfetti, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp("https:\/\/ns-rse\.github\.io\/reproducible_research_example");
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>